<!DOCTYPE html>
<html>
<head>
    <title>Multi-Mega Message Board</title>
    <style>
        body { font-family: sans-serif; max-width: 500px; margin: 40px auto; background: #f4f4f9; }
        #board { background: white; border: 1px solid #ddd; height: 400px; overflow-y: auto; padding: 15px; border-radius: 8px; margin-bottom: 15px; }
        .msg { padding: 10px; border-bottom: 1px solid #eee; }
        .user { font-weight: bold; color: #0070f3; }
        input { width: 100%; padding: 10px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
        button { width: 100%; padding: 10px; background: #0070f3; color: white; border: none; border-radius: 4px; cursor: pointer; }
    </style>
</head>
<body>
    <h2>Multi-Mega Messenger</h2>
    <div id="board">Loading messages...</div>
    <input type="text" id="userInput" placeholder="Your Name">
    <input type="text" id="textInput" placeholder="Write a message...">
    <button onclick="sendMessage()">Post Message</button>

    <script>
        async function loadMessages() {
            const res = await fetch('/api/messages');
            const messages = await res.json();
            document.getElementById('board').innerHTML = messages.map(m => `
                <div class="msg"><span class="user">${m.user}:</span> ${m.text}</div>
            `).join('');
        }

        async function sendMessage() {
            const user = document.getElementById('userInput').value || "Guest";
            const text = document.getElementById('textInput').value;
            if(!text) return;

            await fetch('/api/messages', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ user, text })
            });

            document.getElementById('textInput').value = '';
            loadMessages();
        }

        setInterval(loadMessages, 5000);
        loadMessages();
    </script>
</body>
</html>
